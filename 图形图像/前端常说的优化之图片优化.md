首先要说的是，关于图片的编码原理，压缩算法这些都是很专业的领域，对于前端来讲，知道一般的应用场景和一般的特性就可以了。

# 优化原则：

下面是我总结的一些优化原则：

-   能不使用就不使用，比如可以用 CSS 和 iconfont 代替
-   适合用矢量图，就用矢量图
-   尽量使用小尺寸图片
-   能用 PNG8 不用 PNG24 / PNG32
-   能用 WebP 就用 WebP
-   非动画场景不使用 GIF

体验优化：

-   交错模式
-   渐进式处理
-   懒加载

## 基本概念

### 矢量图与栅格图像

-   矢量图：形使用线、点和多边形来表示图像。
-   栅格图像： 通过对矩形格栅内的每个像素的值进行编码来表示图像。

矢量图： 前端最常见的矢量图是 SVG。关于 SVG 基础看这里 【#### SVG 链接 ####】， SVG 适用于包含简单的几何图形的图像，因为 SVG 缩放不失真，所以 SVG 最适合用于高分辨率屏幕和需要以不同尺寸显示的图像。

栅格图像：

-   由一个个的像素栅格组成
-   每个像素都编码了颜色和透明度信息
-   使用不用的压缩算法（不同的图片格式），以减小图像的文件大小。

以为源数据太大，一般在网页中使用的是经过压缩的文件，下面是一个 JPG 文件的压缩和解压的过程：
![jpg 编码与解码](https://raw.githubusercontent.com/XiangnianZhou/blog/master/%E5%9B%BE%E5%BD%A2%E5%9B%BE%E5%83%8F/svg/img/jpg-c-dec.png)

这里涉及两个过程：

-   编码： 源数据编码得到 JPG 文件；这个 JPG 文件，用于存储和出传输。
-   解码： 要显示这个图像的时候，解码 JPG 文件内容得到源数据。

### 有损压缩无损压缩

继续以上面的 JPG 编解码为例。源数据是**2 维“像素”栅格**，比如，一个 10 × 10 的图像便有 100 个像素。每个像素又存储了 RGBA 的值： (R) 红色通道、(G) 绿色通道、(B) 蓝色通道和 (A) alpha（透明度）通道。每个通道 8 位，即每个像素 4 个字节。
浏览器在拿到 jpg 文件之后，解码得到一个同原始数据一样的像素栅格序列，也要为每个像素分配 4 个字节的内存（无论使用什么格式传输，最后还原数据会和原始数据一样大）。

那么， 如果浏览器可以解码得到原始数据，则为**无损压缩**。如果为了得到更小的文件，压缩过程中可能会丢弃一些人眼不能察觉的信息，而且这个过程是不可逆的，那么浏览器解码也就无法得到原始数据，这种压缩方式便是**有损压缩**。

对于栅格图像要根据不同的使用场景选择合适格式，接下来探究一些常见的这几种图片格式。

# 常见图片个格式

## JPG/JPEG

可能是目前世界上使用最广泛的图像格式。

### 特点：

-   不支持透明；
-   支持有损。

JPG 适合于色彩丰富，线条感比较弱的图片，比如大的背景图，banner 图等等。JPG 是有损压缩，压缩时质量级别越低体积越小，图片也越模糊。所以，在使用时，需要根据需要选择合适的质量级别。

### 优化

### 缺点

对于线条感较强，颜色对比强烈的图，JPG 的压缩通常会更易让人感觉到模糊；另外对于有透明度要求的图 JPG 完全无能为力，这个时候我们就要考虑 PNG 了。

## PNG

### 特点：

-   支持透明；
-   除了选择调色板的大小外，PNG 不采用任何有损压缩算法。

因为 PNG 是一种无损压缩的高保真的图片格式（调色板大小的问题，下面讨论），所以，可以保存更多的细节，同时体积也就更大。

### 优化

既然 PNG 是无损压缩为什么一些工具还声称可以压缩 PNG 呢？比如最知名的 [tinypng（也有人称为熊猫网）](https://tinypng.com/)。


# GIF

与 PNG8的比较：
- 不支持 alpha 透明
- 除非很小的图，PNG8 的体积小于 GIF

## SVG

关于 SVG 基础看这里 【#### SVG 链接 ####】
使用 AI 和 Sketch 中导出的 SVG 包含大量元数据，例如图层信息、注解和 XML 命名空间，这些在浏览器中都是不需要的。因此使用一些工具可以去掉这些没有必要的信息。
另外，因为 SVG 是文本文件，所以要使用 GZIP 进行压缩。

###
